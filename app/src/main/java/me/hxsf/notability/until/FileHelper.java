package me.hxsf.notability.until;

import java.io.File;

/**
 * Created by hxsf on 15－12－13.
 */
public class FileHelper {
    /**
     * 移动文件
     *
     * @param srcFileName 源文件完整路径
     * @param destDirName 目的目录完整路径
     * @return 文件移动成功返回true，否则返回false
     */
    static public boolean moveFile(String srcFileName, String destDirName) {

        File srcFile = new File(srcFileName);
        if (!srcFile.exists() || !srcFile.isFile())
            return false;

        File destDir = new File(destDirName);
        if (!destDir.exists())
            destDir.mkdirs();

        return srcFile.renameTo(new File(destDirName + File.separator + srcFile.getName()));
    }

    static public boolean moveFile(File srcFile, String destDirName) {

        if (!srcFile.exists() || !srcFile.isFile())
            return false;

        File destDir = new File(destDirName);
        if (!destDir.exists())
            destDir.mkdirs();

        return srcFile.renameTo(new File(destDirName + File.separator + srcFile.getName()));
    }


    /**
     * 移动目录
     *
     * @param srcDirName  源目录完整路径
     * @param destDirName 目的目录完整路径
     * @return 目录移动成功返回true，否则返回false
     */
    static public boolean moveDirectory(String srcDirName, String destDirName) {

        File srcDir = new File(srcDirName);
        if (!srcDir.exists() || !srcDir.isDirectory())
            return false;

        File destDir = new File(destDirName);
        if (!destDir.exists())
            destDir.mkdirs();

        return moveDirectory(srcDir, destDir);
    }

    static public boolean moveDirectory(File srcDir, File destDir) {
        if (!srcDir.exists() || !srcDir.isDirectory())
            return false;

        if (!destDir.exists())
            destDir.mkdirs();

        /**
         * 如果是文件则移动，否则递归移动文件夹。删除最终的空源文件夹
         * 注意移动文件夹时保持文件夹的树状结构
         */
        File[] sourceFiles = srcDir.listFiles();
        for (File sourceFile : sourceFiles) {
            if (sourceFile.isFile())
                moveFile(sourceFile.getAbsolutePath(), destDir.getAbsolutePath());
            else if (sourceFile.isDirectory())
                moveDirectory(sourceFile.getAbsolutePath(),
                        destDir.getAbsolutePath() + File.separator + sourceFile.getName());
            else
                ;
        }
        return srcDir.delete();
    }

    /**
     * 删除目录
     *
     * @param srcDirName 源目录完整路径
     * @return 目录移动成功返回true，否则返回false
     */
    static public boolean removeDirectory(File srcDirName) {

        File srcDir = srcDirName;
        if (!srcDir.exists() || !srcDir.isDirectory())
            return false;

        /**
         * 如果是文件则移动，否则递归移动文件夹。删除最终的空源文件夹
         * 注意移动文件夹时保持文件夹的树状结构
         */
        File[] sourceFiles = srcDir.listFiles();
        for (File sourceFile : sourceFiles) {
            if (sourceFile.isFile())
                sourceFile.delete();
            else if (sourceFile.isDirectory())
                removeDirectory(sourceFile);
            else
                ;
        }
        return srcDir.delete();
    }

    static public boolean removeDirectory(String srcDirName) {
        File srcDir = new File(srcDirName);
        return removeDirectory(srcDir);
    }
}
